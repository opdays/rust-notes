# 1 rustå…¥é—¨


## rustä»‹ç»

rustæ˜¯ä¸€é—¨ç³»ç»Ÿçº§åˆ«ç¼–ç¨‹è¯­è¨€

rusté€‚ç”¨é¢†åŸŸï¼šå‘½ä»¤è¡Œå·¥å…·ï¼ŒWebAssemblyä¸ºJavaScriptå†™æ¨¡å—ï¼ŒæœåŠ¡å™¨ç½‘ç»œç¨‹åºï¼ŒåµŒå…¥å¼ç¨‹åº


## rustå®‰è£…


[å®˜æ–¹é“¾æ¥](https://www.rust-lang.org/zh-CN/tools/install)

### rustup

The Rust toolchain installer

æ˜¯ç®¡ç†rustå·¥å…·é“¾çš„å·¥å…·åŒ…æ‹¬åº“

```bash
rustup doc --book #æœ¬åœ°ç¦»çº¿å­¦ä¹ ç½‘ç«™
rustup show #æ˜¾ç¤ºå½“å‰å®‰è£…çš„å·¥å…·é“¾å’Œé…ç½®
rustup update #æ›´æ–°è‡ªèº«å’Œå·¥å…·é“¾
```
rustå¼€å‘å·¥å…·ç›®å½•~/.cargo/bin

### cargo

Rust's package manager

cargoæ˜¯rustå®˜æ–¹åŒ…ç®¡ç†å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»ºé¡¹ç›®ï¼Œç¼–è¯‘ï¼Œè°ƒè¯•ç­‰`cargo --list`æŸ¥çœ‹æ‰€æœ‰å­å‘½ä»¤

```bash
cargo new hello #åˆ›å»ºä¸€ä¸ªhelloé¡¹ç›®

cd hello 

#å¼€å‘æœŸç¼–è¯‘è¿è¡Œ
âœ  hello git:(master) âœ— cargo build    
   Compiling hello v0.1.0 (/data/home/yangynyang/develop/git.woa.com/yangynyang/rust-learn/hello)
    Finished dev [unoptimized + debuginfo] target(s) in 0.33s
âœ  hello git:(master) âœ— ls            
Cargo.lock  Cargo.toml  src  target
âœ  hello git:(master) âœ— ./target/debug/hello      
Hello, world!

âœ  hello git:(master) âœ— cargo run  
    Finished dev [unoptimized + debuginfo] target(s) in 0.00s
     Running `target/debug/hello`
Hello, world!


cargo build --release #ç¼–è¯‘æœŸä¼˜åŒ–

cargo check #æ£€æµ‹ä¸ç¼–è¯‘
```





## 2 rustå­¦ä¹ 

### å˜é‡

```rust
let apples = 5; // ä¸å¯å˜ åé¢ apples = 4é”™è¯¯
let mut bananas = 5; // å¯å˜
```
- `let`å£°æ˜å˜é‡çš„å…³é”®å­—
- `apples` å˜é‡æ ‡è¯†ç¬¦ é»˜è®¤ä¸å¯å˜
- `mut bananas` bananasæ˜¯ä¸€ä¸ªå¯å˜å˜é‡

### å¸¸é‡

```rust
const THREE_HOURS_IN_SECONDS: u32 = 60 * 60 * 3;
```

- `const`å£°æ˜å¸¸é‡çš„å…³é”®å­—
- `THREE_HOURS_IN_SECONDS` å¸¸é‡æ ‡è¯†ç¬¦
- `u32` ç±»å‹ æ­¤å¤„æ˜¯rustæ ‡å‡†ç±»å‹uint32

### å˜é‡éšè—

å¯ä»¥ç”¨ç›¸åŒå˜é‡åç§°æ¥éšè—ä¸€ä¸ªå˜é‡ï¼Œä»¥åŠé‡å¤ä½¿ç”¨ let å…³é”®å­—æ¥å¤šæ¬¡éšè—

```rust
let x = 5;

let x = x + 1;

let x = "123";
```
mut å£°æ˜çš„å˜é‡ç±»å‹åç»­ä¸èƒ½æ”¹å˜ï¼Œåªèƒ½æ”¹å˜å€¼ã€‚
éšè—å¯ä»¥æ”¹å˜å˜é‡ç±»å‹å’Œå€¼

### æ•°æ®ç±»å‹

åœ¨ Rust ä¸­ï¼Œæ¯ä¸€ä¸ªå€¼éƒ½å±äºæŸä¸€ä¸ª æ•°æ®ç±»å‹

#### æ•´å‹

|  å†…å­˜é•¿åº¦   | æœ‰ç¬¦å·(ç¬¬ä¸€ä½ç¬¦å·ä½)  | æ— ç¬¦å·|
|  ----  | ----  |--- |
| 8-bit  | i8 | u8 |
| 16-bit  | i16 | u16 |
| 32-bit  | i32 | u32 |	
| 64-bit  | i64 | u64 |	
| 128-bit  | i128 | u128 |	
|arch|	isize|	usize|

æœ‰ç¬¦å·æ•°ä»¥è¡¥ç å½¢å¼å­˜å‚¨

isize å’Œ usize ç±»å‹ä¾èµ–è¿è¡Œç¨‹åºçš„è®¡ç®—æœºæ¶æ„ï¼š64 ä½æ¶æ„ä¸Šå®ƒä»¬æ˜¯ 64 ä½çš„ï¼Œ 32 ä½æ¶æ„ä¸Šå®ƒä»¬æ˜¯ 32 ä½çš„

æ•´å‹å­—é¢å€¼
|  æ•°å­—å­—é¢å€¼   | ä¾‹å­  |
|  ----  | ----  |
|  Decimal (åè¿›åˆ¶)  | 98_222 |
|  Hex (åå…­è¿›åˆ¶)  | 0xff  |
|  Octal (å…«è¿›åˆ¶)  | 0o77  |
|  Binary (äºŒè¿›åˆ¶)  | 0b1111_0000  |
|  Byte (å•å­—èŠ‚å­—ç¬¦)(ä»…é™äºu8)  | b'A'  |

```rust
let x = 5; //xä¸ºé»˜è®¤ç±»å‹i32
```

#### æµ®ç‚¹å‹

Rust çš„æµ®ç‚¹æ•°ç±»å‹æ˜¯ f32 å’Œ f64ï¼Œåˆ†åˆ«å  32 ä½å’Œ 64 ä½ã€‚é»˜è®¤ç±»å‹æ˜¯ f64ï¼Œå› ä¸ºåœ¨ç°ä»£ CPU ä¸­ï¼Œå®ƒä¸ f32 é€Ÿåº¦å‡ ä¹ä¸€æ ·ï¼Œä¸è¿‡ç²¾åº¦æ›´é«˜ã€‚æ‰€æœ‰çš„æµ®ç‚¹å‹éƒ½æ˜¯æœ‰ç¬¦å·çš„

```rust
fn main() {
    let x = 2.0; // f64

    let y: f32 = 3.0; // f32
}
```

æ•°å€¼è¿ç®—


```rust
fn main() {
    // addition
    let sum = 5 + 10;

    // subtraction
    let difference = 95.5 - 4.3;

    // multiplication
    let product = 4 * 30;

    // division
    let quotient = 56.7 / 32.2;
    let floored = 2 / 3; // Results in 0

    // remainder
    let remainder = 43 % 5;
}
```

### å¸ƒå°”å‹

```rust
let t = true;

let f: bool = false; // with explicit type annotation
```

### å­—ç¬¦ç±»å‹

```rust
let c = 'z';
let z: char = 'â„¤'; // with explicit type annotation
let heart_eyed_cat = 'ğŸ˜»';
```
Rust çš„ char ç±»å‹çš„å¤§å°ä¸ºå››ä¸ªå­—èŠ‚(four bytes)ï¼Œå¹¶ä»£è¡¨äº†ä¸€ä¸ª Unicode æ ‡é‡å€¼


### å¤åˆç±»å‹

Rust æœ‰ä¸¤ä¸ªåŸç”Ÿçš„å¤åˆç±»å‹ï¼šå…ƒç»„ï¼ˆtupleï¼‰å’Œæ•°ç»„ï¼ˆarrayï¼‰

å…ƒç»„æ˜¯ä¸€ä¸ªå°†å¤šä¸ªå…¶ä»–ç±»å‹çš„å€¼ç»„åˆè¿›ä¸€ä¸ªå¤åˆç±»å‹çš„ä¸»è¦æ–¹å¼ã€‚å…ƒç»„é•¿åº¦å›ºå®šï¼šä¸€æ—¦å£°æ˜ï¼Œå…¶é•¿åº¦ä¸ä¼šå¢å¤§æˆ–ç¼©å°

```rust
let tup: (i32, f64, u8) = (500, 6.4, 1);

let (x, y, z) = tup; //å…ƒç»„è§£æ„

let five_hundred = tup.0; //ç´¢å¼•å–å€¼

let six_point_four = tup.1;

```

ä¸å…ƒç»„ä¸åŒï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ çš„ç±»å‹å¿…é¡»ç›¸åŒã€‚Rust ä¸­çš„æ•°ç»„ä¸ä¸€äº›å…¶ä»–è¯­è¨€ä¸­çš„æ•°ç»„ä¸åŒï¼ŒRustä¸­çš„æ•°ç»„é•¿åº¦æ˜¯å›ºå®šçš„

```rust
let a = [1, 2, 3, 4, 5];

let a: [i32; 5] = [1, 2, 3, 4, 5]; //æŒ‡å®šå­˜å‚¨ç±»å‹å’Œé•¿åº¦çš„æ•°ç»„

let a = [3; 5]; //æŒ‡å®šåˆå§‹åŒ–å€¼çš„æ•°ç»„ ç±»ä¼¼ let a = [3, 3, 3, 3, 3]

let first = a[0]; //ä½¿ç”¨ç´¢å¼•è®¿é—®

```

## 3 å‡½æ•°

Rust ä»£ç ä¸­çš„å‡½æ•°å’Œå˜é‡åä½¿ç”¨ snake case è§„èŒƒé£æ ¼ã€‚åœ¨ snake case ä¸­ï¼Œæ‰€æœ‰å­—æ¯éƒ½æ˜¯å°å†™å¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯

å¸¦æœ‰å‚æ•°çš„å‡½æ•°æ— è¿”å›å€¼
```rust
fn another_function(x: i32) {
    println!("The value of x is: {x}");
}
```

Rust æ”¯æŒè¯­å¥è¡¨è¾¾å¼
```rust
let y = {
        let x = 3;
        x + 1
    };
```

å¸¦è¿”å›å€¼çš„å‡½æ•°ï¼Œæ— è¿”å›å‘½å

ä½¿ç”¨ return å…³é”®å­—å’ŒæŒ‡å®šå€¼ï¼Œå¯ä»å‡½æ•°ä¸­æå‰è¿”å›ï¼›ä½†å¤§éƒ¨åˆ†å‡½æ•°éšå¼çš„è¿”å›æœ€åçš„è¡¨è¾¾å¼
```rust
fn five() -> i32 {
    5 //æ²¡æœ‰åˆ†å· å› ä¸ºè¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼
}
```
## 4 æ§åˆ¶

if è¡¨è¾¾å¼
```rust
if number < 5 {
    println!("condition was true");
} else {
    println!("condition was false");
}
```

if elseè¡¨è¾¾å¼
```rust
if number % 4 == 0 {
    println!("number is divisible by 4");
} else if number % 3 == 0 {
    println!("number is divisible by 3");
} else if number % 2 == 0 {
    println!("number is divisible by 2");
} else {
    println!("number is not divisible by 4, 3, or 2");
}
```
å› ä¸º if æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œ å¯ä»¥åœ¨ let è¯­å¥çš„å³ä¾§ä½¿ç”¨å®ƒ
```rust
let number = if condition { 5 } else { 6 };
```

loopæ— é™å¾ªç¯ ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼

```rust
loop {
    println!("again!");
}
```
breakä¸­æ–­å¾ªç¯å¹¶è¿”å›ä¸€ä¸ªå€¼
```rust
let result = loop {
    counter += 1;

    if counter == 10 {
        break counter * 2;
    }
};
```

å¾ªç¯æ ‡ç­¾ï¼šåœ¨å¤šä¸ªå¾ªç¯ä¹‹é—´æ¶ˆé™¤æ­§ä¹‰
```rust
'counting_up: loop {}
```

```rust
fn main() {
    let mut count = 0;
    'counting_up: loop {
        println!("count = {count}");
        let mut remaining = 10;

        loop {
            println!("remaining = {remaining}");
            if remaining == 9 {
                break;
            }
            if count == 2 {
                break 'counting_up;
            }
            remaining -= 1;
        }

        count += 1;
    }
    println!("End count = {count}");
}
```

whileæ¡ä»¶å¾ªç¯,for(x;x;x)å¾ªç¯å˜ä½“

```rust
fn main() {
    let mut number = 3;

    while number != 0 {
        println!("{number}!");

        number -= 1;
    }

    println!("LIFTOFF!!!");
}
```

for å¾ªç¯éå†é›†åˆä¸­çš„å…ƒç´ 
```rust
fn main() {
    let a = [10, 20, 30, 40, 50];

    for element in a {
        println!("the value is: {element}");
    }
}
```